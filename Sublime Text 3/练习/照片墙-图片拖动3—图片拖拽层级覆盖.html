<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>照片墙——图片拖动</title>
	<style>
		*{margin: 0;padding: 0;}
		#ul1{width: 660px; position: relative;margin: 0 auto;}
		#ul1 li{width: 200px; height: 150px;float: left;list-style: none; margin: 10px;}
		#ul1 img{width: 200px; height: 150px;}
	</style>

	<script>
		window.onload = function(){
			var oUl = document.getElementById('ul1');
			var aLi = oUl.getElementsByTagName('li');
			var iMinZindex = 2;
			var i=0;

//1.布局转换
			var aPos = []; //数组存放aLi的位置			
			for(i=0; i<aLi.length; i++){
				aPos[i] = { left:aLi[i].offsetLeft, top:aLi[i].offsetTop };

			}
			for(i=0; i<aLi.length; i++){
				aLi[i].style.left = aPos[i].left + 'px';
				aLi[i].style.top = aPos[i].top + 'px';

				aLi[i].style.position = 'absolute';
				aLi[i].style.margin = '0' ;
			}

//2.让每个图片可拖拽
			for(i=0; i<aLi.length; i++){
				setDrag(aLi[i]);
			}

			function setDrag(obj){

				obj.onmousedown = function(ev) {

				//3.解决拖拽的图片被覆盖的问题
					obj.style.zIndex = iMinZindex++;

					var oEvent = ev || event;

					var disX = oEvent.clientX - obj.offsetLeft;
					var disY = oEvent.clientY - obj.offsetTop;

					document.onmousemove = function(ev){
						var oEvent = ev || event;

						obj.style.left = oEvent.clientX - disX + 'px';
						obj.style.top = oEvent.clientY - disY + 'px';

					}

					document.onmouseup = function(){
						document.onmouseup = document.onmousemove = null;
					}

					return false;
				}
			}

		}
	</script>
</head>
<body>
	<ul id="ul1">
		<li><img src="imgdesert/1.jpg" alt=""></li>
		<li><img src="imgdesert/2.jpg" alt=""></li>
		<li><img src="imgdesert/3.jpg" alt=""></li>
		<li><img src="imgdesert/4.jpg" alt=""></li>
		<li><img src="imgdesert/5.jpg" alt=""></li>
		<li><img src="imgdesert/6.jpg" alt=""></li>
		<li><img src="imgdesert/7.jpg" alt=""></li>
		<li><img src="imgdesert/8.jpg" alt=""></li>
		<li><img src="imgdesert/9.jpg" alt=""></li>
		<li><img src="imgdesert/10.jpg" alt=""></li>
	</ul>
</body>
</html>